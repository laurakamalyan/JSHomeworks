<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jquery - homework 2</title>
</head>

<body>
    <select id="countries">
        <option selected disabled>Choose country</option>
    </select>
    <div id="flag"></div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
        $(() => {
            let api = {
                countries: [],
                flags: []
            }

            async function getCountries() {
                await fetch("https://restcountries.com/v3.1/all")
                    .then(res => res.json())
                    .then(data => {
                        data.forEach(d => {
                            api.countries.push(d.name.common);
                            api.flags.push(d.flags.png);
                            $("#countries").append(`<option>${d.name.common}</option>`);
                        })
                    });
            }
            getCountries();

            $("#countries").on("change", e => {
                let choosed_country = e.target.value;
                api.countries.forEach((country, index) => {
                    if (country === choosed_country) {
                        $("#flag").html(`<img src="${api.flags[index]}" alt="flag" width="200">`)
                    }
                });
            })
        });
    </script>
</body>

</html>